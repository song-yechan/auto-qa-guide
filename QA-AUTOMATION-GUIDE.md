# QA 자동화 가이드

> Vercel 배포 환경에서 Claude Code + Playwright를 활용한 QA 자동화
> **Claude Code를 처음 사용하는 분도 따라할 수 있습니다.**


---

## 목차

0. [빠른 시작 (프롬프트 요약)](#0-빠른-시작-프롬프트-요약)
1. [사전 준비](#1-사전-준비)
2. [처음 사용할 때](#2-처음-사용할-때)
3. [QA 테스트 요청 방법](#3-qa-테스트-요청-방법)
4. [테스트 프로세스](#4-테스트-프로세스)
5. [테스트 결과 확인](#5-테스트-결과-확인)
6. [결과 검증 방법](#6-결과-검증-방법)
7. [세션 만료 시 재로그인](#7-세션-만료-시-재로그인)
8. [FAQ](#8-faq)

---

## 0. 빠른 시작 (프롬프트 요약)

> 바쁜 분들을 위한 핵심만 정리했습니다.

### 테스트 시작

```bash
cd ~/auto-QA
claude
```

```
QA 테스트 요청
```

**끝입니다.** Claude가 알아서:
- 환경 점검하고 필요하면 설치
- 로그인 안 되어 있으면 로그인 먼저 안내
- 테스트명, URL, 케이스 순서대로 질문

### 테스트 케이스 입력 예시

```
테스트 케이스:
1. 페이지: 로그인
   동작: 이메일 형식 아닌 값 입력
   확인: 에러 메시지 노출

2. 페이지: 로그인
   동작: 빈 비밀번호로 로그인 시도
   확인: 에러 메시지 노출
```

### 프롬프트 요약

| 상황 | 프롬프트 |
|------|---------|
| 테스트 시작 | `QA 테스트 요청` |
| 세션 만료됐을 때 | `다시 로그인해줘` |
| 요소 못 찾을 때 | `codegen으로 selector 확인해줘` |

---

## 1. 사전 준비

> Claude Code를 실행할 수 있으면 준비 끝입니다.
> 나머지는 Claude가 알아서 설치합니다.

### 필요한 것

**Claude Code가 실행되면 됩니다.** (이미 설치되어 있다는 전제)

```bash
cd ~/auto-QA
claude
```

이게 되면 준비 완료입니다.

### Claude가 알아서 하는 것들

- Playwright 설치
- 브라우저(Chromium) 설치
- 폴더 생성
- 설정 파일 생성

**그냥 `세션 저장해줘` 또는 `QA 테스트 요청` 하면 됩니다.**

---

## 2. 처음 사용할 때

### Step 1: Claude Code 실행

터미널(Warp, iTerm 등)을 열고:

```bash
cd ~/auto-QA
claude
```

### Step 2: 테스트 요청

```
QA 테스트 요청
```

### Step 3: Claude가 알아서 처리

처음 실행하면 Claude가 자동으로:
1. 필요한 패키지 설치 (Playwright 등)
2. 브라우저 설치 (Chromium)
3. **"로그인이 필요합니다. Vercel URL을 입력해주세요"** 안내
4. URL 입력하면 브라우저 열림 → **Google SSO로 로그인** → **Inspector 창 닫기**
5. 로그인 완료 후 테스트 진행

**별도로 "세션 저장" 같은 명령어를 외울 필요 없습니다.**

---

## 3. QA 테스트 요청 방법

### 요청 시작

Claude Code에 다음과 같이 입력하세요:

```
QA 테스트 요청
```

### 단계별 안내

Claude가 순차적으로 질문합니다:

**Step 1: 테스트명**
```
테스트명을 입력해주세요 (해당 명칭에 맞게 폴더가 생성됩니다)
```
→ 예: `로그인_validation_검증`

**Step 2: URL**
```
Vercel URL을 입력해주세요
```
→ 예: `https://my-app-abc123.vercel.app`

**Step 3: 앱 환경 설정 (선택)**
```
특정 앱 환경에서 테스트해야 하나요?
- 아니요, 바로 진행
- 네, 앱 설정 필요
```
→ 특정 앱 내에서 테스트해야 하면 "네" 선택 후 앱 이름/접근 방법 입력

**Step 4: 테스트 케이스**
```
테스트 케이스를 입력해주세요. 형식은 아래가 가장 적합합니다:

테스트 케이스:
1. 페이지: {페이지명}
   동작: {수행할 액션}
   확인: {기대 결과}

* 만약 테스트 케이스가 모호하다면 [## 별첨: QA 케이스 작성 프롬프트] 내용을 확인해주세요
```

### 테스트 케이스 예시

```
테스트 케이스:
1. 페이지: 로그인
   동작: 이메일 형식 아닌 값 입력
   확인: "이메일 형식으로 입력해주세요" 에러 메시지 노출

2. 페이지: 로그인
   동작: 정상 이메일 입력
   확인: 에러 메시지 없음
```

---

## 4. 테스트 프로세스

Claude가 QA 요청을 받으면 다음 단계로 진행합니다:

```
Phase 1: 정보 수집 (순차적 질문)
┌─────────────────────────────────────┐
│ 1. "테스트명을 입력해주세요"           │
│ 2. "Vercel URL을 입력해주세요"        │
│ 3. "특정 앱 환경에서 테스트해야 하나요?" │
│ 4. "테스트 케이스를 입력해주세요"       │
└─────────────────────────────────────┘
                 ↓
Phase 2: 준비
┌─────────────────────────────────────┐
│ 4. Tests/{테스트명}/ 폴더 생성         │
│ 5. baseURL 업데이트 (필요시)          │
└─────────────────────────────────────┘
                 ↓
Phase 3: 계획
┌─────────────────────────────────────┐
│ 6. 테스트 케이스 표로 제시             │
│ 7. "이 계획대로 진행할까요?" 승인 요청   │
└─────────────────────────────────────┘
                 ↓
Phase 4: 실행
┌─────────────────────────────────────┐
│ 8. 페이지 구조 파악 (codegen, 필요시)  │
│ 9. 테스트 코드 작성 (.spec.ts)        │
│ 10. Playwright 테스트 실행            │
└─────────────────────────────────────┘
                 ↓
Phase 5: 산출물 저장
┌─────────────────────────────────────┐
│ 11. report/, results/ 폴더 정리       │
│ 12. 결과 리포트 작성 (.md)            │
└─────────────────────────────────────┘
                 ↓
Phase 6: 검증
┌─────────────────────────────────────┐
│ 13. 테스트 리포트 브라우저에서 오픈     │
│ 14. 객관식 선택지 제시                │
│     - 테스트 완료 → 종료              │
│     - UI 모드로 추가 확인 → 실행       │
└─────────────────────────────────────┘
```

---

## 5. 테스트 결과 확인

테스트가 완료되면 다음 구조로 산출물이 생성됩니다:

```
~/auto-QA/Tests/{테스트명}/
├── {테스트명}_test_code.spec.ts   ← 테스트 코드
├── {테스트명}_test_result.md      ← 결과 리포트 (마크다운)
├── report/                        ← HTML 리포트
│   ├── index.html                 ← 메인 리포트
│   ├── data/                      ← 테스트 데이터
│   └── trace/                     ← 실행 트레이스
├── results/                       ← 테스트 실행 산출물
│   └── {테스트별 폴더}/
│       ├── test-failed-1.png      ← 실패 스크린샷
│       └── video.webm             ← 실패 비디오
└── screenshots/                   ← 수동 저장 스크린샷
```

### 결과 리포트 예시

```markdown
# 테스트 결과: 로그인_validation_검증

## 요약
- 자동화 실행: 3개
- 통과: 2개 ✅
- 실패: 1개 ❌
- 자동화 제외: 2개 ⚠️

## 자동화 테스트 결과

| # | 테스트명 | 결과 | 비고 |
|---|----------|------|------|
| 1 | 이메일 형식 검증 | ✅ Pass | - |
| 2 | 정상 이메일 입력 | ✅ Pass | - |
| 3 | 비밀번호 미입력 | ❌ Fail | 에러 메시지 다름 |

## 자동화 제외 항목

| # | 테스트명 | 제외 사유 | 상세 설명 |
|---|----------|----------|----------|
| 4 | Google SSO 로그인 | ❌ 외부 인증 | Google OAuth는 외부 서비스로 자동화 불가. 수동 테스트 필요. |
| 5 | 이메일 로그인 성공 | ⚠️ 실제 계정 필요 | 보안상 테스트 코드에 계정 정보 포함 불가. 수동 테스트 필요. |

> **참고**: 자동화 제외 항목은 수동으로 검증이 필요합니다.

## 검증 방법
- HTML 리포트: 테스트 완료 후 자동 오픈
- UI 모드: "UI 모드로 추가 확인" 선택 시 Claude가 실행
```

---

## 6. 결과 검증 방법

테스트 완료 후 Claude가 자동으로 HTML 리포트를 열어줍니다.

### 검증 흐름

```
HTML 리포트 자동 오픈
        ↓
"확인을 완료하셨으면 다음 동작을 요청해주세요" 질문
        ↓
┌─────────────────┬──────────────────────┐
│ 1. 테스트 완료   │ 2. UI 모드로 추가 확인 │
└─────────────────┴──────────────────────┘
        ↓                    ↓
      종료            Claude가 UI 모드 실행
```

### HTML 리포트 (기본)

- 테스트 완료 후 **자동으로 브라우저에서 열림**
- 각 테스트의 통과/실패 상태 확인
- 실패 시 스크린샷/에러 메시지 확인

### UI 모드 (추가 확인)

"2. UI 모드로 추가 확인"을 선택하면 Claude가 해당 테스트의 UI 모드를 실행합니다.

**UI 모드 특징:**
- 해당 테스트만 로드됨 (다른 테스트와 섞이지 않음)
- 각 단계별 **스크린샷, DOM 상태, 타임라인** 확인 가능
- 실시간으로 테스트 재실행 가능

### 검증 방법 비교

| 구분 | HTML 리포트 | UI 모드 |
|------|------------|---------|
| 용도 | 결과 확인 | 과정 확인/디버깅 |
| 실행 | Claude 자동 | Claude 자동 (선택 시) |
| 장점 | 빠름, 공유 가능 | 단계별 상세 확인 |

---

## 7. 세션 만료 시

로그인 세션이 만료되면 테스트가 실패합니다.

### 방법 1: 그냥 다시 테스트 요청
```
QA 테스트 요청
```
→ Claude가 세션 만료를 감지하면 자동으로 재로그인 안내

### 방법 2: 직접 재로그인 요청
```
다시 로그인해줘
```
→ 브라우저가 열리면 로그인 후 Inspector 창 닫기

---

## 8. FAQ

### Q: `claude` 명령어가 안 돼요

Claude Code가 설치되지 않은 경우입니다. 담당자에게 문의하세요.

(참고: `npm install -g @anthropic-ai/claude-code` 또는 `brew install claude-code`로 설치)

### Q: 테스트가 계속 실패해요

1. **세션 만료**: `세션 다시 저장해줘` 입력
2. **URL 오류**: Vercel URL이 유효한지 확인
3. **요소 못 찾음**: `codegen으로 selector 확인해줘` 입력

### Q: 특정 앱으로 들어가야 해요

테스트 케이스에 명시하세요:

```
테스트 케이스:
1. 페이지: 앱 목록
   동작: "bookscribe" 앱 클릭
   확인: 앱 대시보드로 이동

2. 페이지: 대시보드
   동작: ...
```

### Q: 운영 환경에 영향을 주면 안 돼요

테스트 요청 시 명시하세요:

```
주의사항: 읽기 전용 테스트만 (저장/수정 금지)
```

### Q: 여러 브라우저에서 테스트하고 싶어요

```
테스트 옵션: Chrome, Firefox, Safari 모두 테스트
```

### Q: 테스트가 진짜 동작했는지 어떻게 확인해요?

1. **HTML 리포트**: 테스트 완료 후 자동으로 브라우저에서 열림
2. **UI 모드**: "확인 완료하셨나요?"에서 "UI 모드로 추가 확인" 선택 → Claude가 실행

---

## 폴더 구조

```
~/auto-QA/
├── Tests/                         ← 테스트 산출물 (테스트명별 폴더)
│   └── {테스트명}/
│       ├── {테스트명}_test_code.spec.ts
│       ├── {테스트명}_test_result.md
│       ├── report/                ← HTML 리포트
│       └── results/               ← 실행 산출물
├── auth.json                      ← 로그인 세션 (자동 생성)
├── playwright.config.ts           ← 설정 파일
├── CLAUDE.md                      ← Claude 시스템 지침
└── QA-AUTOMATION-GUIDE.md         ← 이 가이드
```

---

## 주의사항

1. **auth.json은 공유 금지** - 본인 계정 로그인 정보가 포함됨
2. **운영계 주의** - 저장/수정 동작은 명시적으로 금지 요청
3. **세션 만료** - 보통 24시간 후 만료, 재로그인 필요

---

## 별첨: QA 케이스 작성 프롬프트

아래 프롬프트를 Claude나 ChatGPT에 입력하면 자동화 QA에 적합한 테스트 케이스를 생성할 수 있습니다.

### 프롬프트

```
당신은 QA 자동화 전문가입니다. Playwright 기반 E2E 테스트에 적합한 테스트 케이스를 작성해주세요.

## 제약 조건
- 자동화 가능한 케이스만 작성 (수동 확인 필요한 것 제외)
- Google SSO 등 외부 인증은 자동화 불가
- 읽기 전용 테스트 위주 (데이터 생성/수정/삭제 제외)
- UI 요소 확인, validation 체크, 에러 메시지 검증 위주

## 자동화에 적합한 케이스 유형
1. UI 요소 존재 확인 (버튼, 입력창, 텍스트 등)
2. Input validation (이메일 형식, 필수값 등)
3. 에러 메시지 노출 확인
4. i18n (다국어) 텍스트 확인
5. 페이지 이동/라우팅 확인
6. 로딩 상태 확인

## 자동화에 부적합한 케이스 유형
- 외부 서비스 연동 (Google SSO, 결제 등)
- 실제 데이터 생성/수정/삭제
- 이메일/SMS 발송 확인
- 시각적 디자인 검증

## 출력 형식
테스트 케이스:
1. 페이지: {페이지명}
   동작: {수행할 액션}
   확인: {기대 결과}

## 테스트 대상
{여기에 테스트할 기능/페이지 설명}
```

### 사용 예시

```
## 테스트 대상
로그인 페이지 QA
- 이메일/비밀번호 입력 폼
- Google SSO 버튼
- 로그인 버튼
- 비밀번호 찾기 링크
```

### 출력 예시

```
테스트 케이스:
1. 페이지: 로그인
   동작: 페이지 로드
   확인: 이메일, 비밀번호 입력창 placeholder 노출

2. 페이지: 로그인
   동작: 이메일 형식 아닌 값 입력
   확인: "이메일 형식으로 입력해주세요" 에러 메시지 노출

3. 페이지: 로그인
   동작: 비밀번호 미입력 후 로그인 버튼 클릭
   확인: 필수값 에러 메시지 노출

4. 페이지: 로그인
   동작: 잘못된 이메일/비밀번호 입력 후 로그인
   확인: "이메일 또는 비밀번호가 올바르지 않습니다" 에러 노출

5. 페이지: 로그인
   동작: 비밀번호 찾기 링크 클릭
   확인: 비밀번호 찾기 페이지로 이동
```
